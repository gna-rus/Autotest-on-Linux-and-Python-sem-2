import subprocess
folder = f"C:/Users/grigoriev.na/Desktop/Уроки/GeekBrains/python/"

def find_subprocess(path: str, text: str):
    result = subprocess.run(path, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, encoding='utf-8')
    lst = result.stdout.split("\n") + result.stderr.split("\n")
    print(lst)
    if result.returncode != 0:
        if text in lst:
            return True
        else:
            return False
    else:
        return False

def test_step2():
    # проверка на распаковку
    #  {data['out']} - содержит просто ссылку
    res 1 = find_subprocess(f"cd {data['out']}; 7z ear x2.7z -o{data['folder1']} -y", "Everything is 0k")
    res 2 = find_subprocess(f"ls {data['folder 1']}", "testtxt")
    assert res1 and res2, "test2 FAIL"
